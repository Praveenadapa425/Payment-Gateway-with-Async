!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PaymentGateway=t():e.PaymentGateway=t()}(this,()=>(window.PaymentGateway=class{constructor(e){if(!e.key)throw new Error("API key is required");if(!e.orderId)throw new Error("Order ID is required");this.options={key:e.key,orderId:e.orderId,onSuccess:e.onSuccess||function(){},onFailure:e.onFailure||function(){},onClose:e.onClose||function(){}},this.modal=null,this.iframe=null,this.overlay=null}open(){this.modal=document.createElement("div"),this.modal.id="payment-gateway-modal",this.modal.setAttribute("data-test-id","payment-modal"),this.modal.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 9999;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    ",this.overlay=document.createElement("div"),this.overlay.className="modal-overlay",this.overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.5);\n      z-index: 9999;\n    ";const e=document.createElement("div");e.className="modal-content",e.style.cssText="\n      position: relative;\n      background: white;\n      border-radius: 8px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n      overflow: hidden;\n      z-index: 10000;\n      max-width: 500px;\n      width: 90%;\n      max-height: 90vh;\n    ",this.iframe=document.createElement("iframe"),this.iframe.setAttribute("data-test-id","payment-iframe"),this.iframe.src=`http://localhost:3001/checkout?order_id=${this.options.orderId}&embedded=true`,this.iframe.style.cssText="\n      width: 100%;\n      height: 500px;\n      border: none;\n    ";const t=document.createElement("button");t.setAttribute("data-test-id","close-modal-button"),t.className="close-button",t.innerHTML="&times;",t.style.cssText="\n      position: absolute;\n      top: 10px;\n      right: 10px;\n      background: none;\n      border: none;\n      font-size: 24px;\n      cursor: pointer;\n      z-index: 10001;\n      color: #333;\n      padding: 5px;\n      width: 30px;\n      height: 30px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ",t.onclick=()=>{this.close()},e.appendChild(t),e.appendChild(this.iframe),this.modal.appendChild(this.overlay),this.modal.appendChild(e),document.body.appendChild(this.modal),window.addEventListener("message",this.handleMessage.bind(this))}close(){this.modal&&(document.body.removeChild(this.modal),this.modal=null,this.iframe=null,this.overlay=null),this.options.onClose()}handleMessage(e){"payment_success"===e.data.type?(this.options.onSuccess(e.data.data),this.close()):"payment_failed"===e.data.type?this.options.onFailure(e.data.data):"close_modal"===e.data.type&&this.close()}},{}));